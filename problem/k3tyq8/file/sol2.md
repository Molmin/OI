若一段数符合条件，那么其任意一段前缀的和都不能为负数，并且容易发现这两个条件是等价的。于是我们只需要维护这个值就可以了。

容易发现这样的做法不需要用到树上信息，所以我们没有任何必要建出这棵树。

考虑到可能存在不在树上的点，所以我们需要建立一个总根 $0$，这个总根引出的一些代码细节需要特别注意。