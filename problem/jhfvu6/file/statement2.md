有一个网格图，其中有 $N$ 个格子被染成黑色，其余为白色。被染色的第 $i$ 个格子处于第 $x_i$ 行，$y_i$ 列，保证这个网格图是合法的，即黑格和白格是分别四联通的，就是说对于任意两个同色格子，可以通过与其同色的格子组成的路径到达。

求两两黑格最段路之和。