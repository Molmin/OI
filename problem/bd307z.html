
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title id="title">#bd307z. Colored Jenga - OI Problems</title>
        <link rel="shortcut icon" type="image/x-icon" href="https://topan-dev.github.io/TopanUI/favicon.ico">
        <script src="https://topan-dev.github.io/TopanUI/src/jquery.js"></script>
        <link rel="stylesheet" href="https://topan-dev.github.io/TopanUI/topan.css">
        <script src="https://topan-dev.github.io/TopanUI/topan.js"></script>
        <script src="https://kit.fontawesome.com/0d8081718e.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
        <style>
            @font-face{
                font-family: font-firacode;
                src: url("/OI/pub/FiraCode-Regular.ttf");
            }
            pre{
	            font-family: "font-firacode";
            }
        </style>
        
    </head>
    <body>
        <div class="topan-header">
            <div class="topan-header-home">
                <a href="/OI">
                    <button class="topan-button-ordinary topan-button-commonly topan-button-header-round-left">
                        <i class="fa fa-home"></i>
                    </button>
                </a>
            </div>
            <div class="topan-header-left">
                <span class="topan-header-text">OI Problems&nbsp;</span>
                <a href="/OI/about">
                    <span class="topan-button-ordinary topan-button-commonly topan-button-header-block">
                        <i class="fa fa-solid fa-circle-info"></i>
                        <span>&nbsp;关于</span>
                    </span>
                </a>
                
                
            </div>
            <div class="topan-header-right">
            </div>
        </div>
        <div class="topan-outer">
            <div class="topan-page">
                <div class="topan-mainpage-auto">
                    <br>
                    <style>
    .row:after{
        clear: both;
    }
    .row:before,.row:after{
        content: " ";
        display: table;
    }
    .row{
        margin: 0 auto;
        margin-left: auto;
        margin-right: auto;
    }
    .column-one-fifth{
        width: 20%;
        float: left;
    }
    .column-four-fifth{
        width: 80%;
        float: left;
    }
    .messages-display{
        color: #888;
    }
</style>
<style>
    .tag{
        padding: 2px 6px;
        border-radius: 3px;
        font-size: 90%;
        color: white;
        background: var(--tag-color);
        display: inline-block;
        line-height: 17.25px;
    }
    .tag:hover{
        color: white !important;
        background: var(--tag-color-hover);
    }
    .tag:hover::after{
        width: 0 !important;
    }
    .tag-alg{
        --tag-color: #14558f;
        --tag-color-hover: #5388a7;
    }
    .tag-time{
        --tag-color: #1c830e;
        --tag-color-hover: #60af55;
    }
    .tag-src{
        --tag-color: #be9420;
        --tag-color-hover: #f0bb65;
    }
    .tag-special{
        --tag-color: #6926c0;
        --tag-color-hover: #8f5dd1;
    }
    .tag-place{
        --tag-color: #c33e85;
        --tag-color-hover: #e071ad;
    }
</style>
<script>
    var directTag=(tag)=>{
        if(pageName=='problem_detail')
            window.location.href=`/OI/?search=${tag}`;
        if(pageName=='problem_list'){
            window.history.pushState(null,null,`/OI/?search=${tag}`);
            show(search(JSON.parse(new Base64().decode(tag))));
        }
    }
</script>

<div class="row">
    <div class="column-one-fifth">
        <div style="padding-right: 0px;">
            <div class="topan-section-shadow">
                
                <a class="topan-menu-option" href="/OI/problem/bd307z/solution"><i class="fa fa-solid fa-book"></i>&nbsp;&nbsp;题解与代码</a>
                <a class="topan-menu-option" href="/OI/problem/bd307z/files"><i class="fa fa-regular fa-file-code"></i>&nbsp;&nbsp;文件</a>
            </div>
        </div>
    </div>
    <div class="column-four-fifth">
        <div style="padding-left: 20px;">
            <div class="topan-section-shadow">
                <h2>#bd307z. Colored Jenga</h2>
                <p class="messages-display">
                    
                    <strong><i class="fa fa-solid fa-clock"></i> 时间限制：</strong>5 s
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    
                    
                    <strong><i class="fa fa-solid fa-database"></i> 空间限制：</strong>250 MiB
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    
                    
                        <strong><i class="fa fa-solid fa-tag"></i> 标签：</strong>
                        <a href="javascript:directTag('eyJmb2xkZXJzIjpbIuaVsOWtpiJdfQ%3D%3D')" class="tag tag-alg">数学</a>&nbsp;<a href="javascript:directTag('eyJmb2xkZXJzIjpbIuaVsOWtpi%2FmpoLnjofmnJ%2FmnJsiXX0%3D')" class="tag tag-alg">概率期望</a>&nbsp;<a href="javascript:directTag('eyJmb2xkZXJzIjpbIuaQnOe0oiJdfQ%3D%3D')" class="tag tag-alg">搜索</a>&nbsp;<a href="javascript:directTag('eyJmb2xkZXJzIjpbIuaQnOe0oi%2Fmt7HluqbkvJjlhYjmkJzntKIiXX0%3D')" class="tag tag-alg">深度优先搜索</a>&nbsp;<a href="javascript:directTag('eyJmb2xkZXJzIjpbIuWKqOaAgeinhOWIkiJdfQ%3D%3D')" class="tag tag-alg">动态规划</a>&nbsp;<a href="javascript:directTag('eyJmb2xkZXJzIjpbIuWKqOaAgeinhOWIki%2FnirbmgIHljovnvKnliqjmgIHop4TliJIiXX0%3D')" class="tag tag-alg">状态压缩动态规划</a>&nbsp;<a href="javascript:directTag('eyJmb2xkZXJzIjpbIuWKqOaAgeinhOWIki%2FmpoLnjofliqjmgIHop4TliJIiXX0%3D')" class="tag tag-alg">概率动态规划</a>&nbsp;
                    
                </p>
                <p class="messages-display">
                    <strong>算法难度等级：</strong>0
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <strong>思维难度等级：</strong>0
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <strong>实现难度等级：</strong>0
                </p>
            </div>
            <br>
            
                <blockquote class="topan-blockquote-tip">
                    <p>本题来源于：<a href="https://codeforces.com/contest/424/problem/E">Codeforces Round 242 (Div. 2) Problem E</a></p>
                </blockquote>
            
            
                <div class="topan-section-shadow">
                    <h2>题目大意</h2>
<p>有一个单人游戏。一开始有一个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span> 层的塔，每层有三个位置，初始每层每个位置各放一个红色、绿色或者蓝色的木板。</p>
<p>有一个六面色子，掷出每个面的概率相等，六个面分别是绿、绿、蓝、蓝、红、黑颜色的。</p>
<p>连续投掷色子直至塔无法继续抽取木板。若投掷出黑色，就不进行任何操作；否则，选择一块相应颜色的木板，放到塔的顶层（若顶层未填满，则必须先放在没有放木板的位置上，否则放在最顶层的上面一层三个位置中的任意一个）；若无法取出一个投掷出颜色的木板，也不进行任何操作。</p>
<p>每次抽取木板必须满足以下条件：</p>
<ul>
<li>
<p>抽取木板所在层非顶层；</p>
</li>
<li>
<p>抽取后该层中间位置有木板或者两边位置都有木板。</p>
</li>
</ul>
<p>现在给定一个塔的初始局面，求：在操作者争取掷骰子次数最少的情况下，游戏结束时，掷骰子的期望次数。</p>
<h2>题目描述</h2>
<p>Cold winter evenings in Tomsk are very boring — nobody wants be on the streets at such a time. Residents of Tomsk while away the time sitting in warm apartments, inventing a lot of different games. One of such games is 'Colored Jenga'.</p>
<p>This game requires wooden blocks of three colors: red, green and blue. A tower of <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span> levels is made from them. Each level consists of three wooden blocks. The blocks in each level can be of arbitrary colors, but they are always located close and parallel to each other. An example of such a tower is shown in the figure.</p>
<p><img src="./bd307z/file/pic1.png" alt=""></p>
<p>The game is played by exactly one person. Every minute a player throws a special dice which has six sides. Two sides of the dice are green, two are blue, one is red and one is black. The dice shows each side equiprobably.</p>
<p>If the dice shows red, green or blue, the player must take any block of this color out of the tower at this minute so that the tower doesn't fall. If this is not possible, the player waits until the end of the minute, without touching the tower. He also has to wait until the end of the minute without touching the tower if the dice shows the black side. It is not allowed to take blocks from the top level of the tower (whether it is completed or not).</p>
<p>Once a player got a block out, he must put it on the top of the tower so as to form a new level or finish the upper level consisting of previously placed blocks. The newly constructed levels should have all the same properties as the initial levels. If the upper level is not completed, starting the new level is prohibited.</p>
<p>For the tower not to fall, in each of the levels except for the top, there should be at least one block. Moreover, if at some of these levels there is exactly one block left and this block is not the middle block, the tower falls.</p>
<p>The game ends at the moment when there is no block in the tower that you can take out so that the tower doesn't fall.</p>
<p>Here is a wonderful game invented by the residents of the city of Tomsk. I wonder for how many minutes can the game last if the player acts optimally well? If a player acts optimally well, then at any moment he tries to choose the block he takes out so as to minimize the expected number of the game duration.</p>
<p>Your task is to write a program that determines the expected number of the desired amount of minutes.</p>
<h2>输入格式</h2>
<p>The first line of the input contains the only integer <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span> ( <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">2\leq n\leq 6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.78041em;vertical-align:-0.13597em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span><span class="mrel">≤</span><span class="mord mathit">n</span><span class="mrel">≤</span><span class="mord mathrm">6</span></span></span></span> ) — the number of levels in the tower.</p>
<p>Then <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">n</span></span></span></span> lines follow, describing the levels of the tower from the bottom to the top (the first line is the top of the tower). Each level is described by three characters, the first and the third of them set the border blocks of the level and the second one is the middle block. The character that describes the block has one of the following values <code>R</code> (a red block), <code>G</code> (a green block) and <code>B</code> (a blue block).</p>
<h2>输出格式</h2>
<p>In the only line of the output print the sought mathematical expectation value. The answer will be considered correct if its relative or absolute error doesn't exceed <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mrow><mo>−</mo><mn>6</mn></mrow></msup></mrow><annotation encoding="application/x-tex">10^{-6}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8141079999999999em;"></span><span class="strut bottom" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord"><span class="mord mathrm">0</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord">−</span><span class="mord mathrm">6</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> .</p>
<h2>样例输入输出</h2>
<pre><code class="language-input1">6
RGB
GRG
BBB
GGR
BRG
BRB
</code></pre>
<pre><code class="language-output1">17.119213696601992
</code></pre>

                </div>
            
        </div>
    </div>
</div>

<script>
    var pageName='problem_detail';
</script>
                    <br>
                </div>
                <footer class="topan-footer">
                    <p></p>
                    <p style="text-align: center; color: #555; font-size: 12px;">
                        Powered by <a href="https://github.com/Molmin/OI.git">Molmin/OI</a>&nbsp;&nbsp;&nbsp;
                        © 2023 <a href="https://github.com/Molmin/">Milmon</a>
                    </p>
                </footer>
            </div>
        </div>
    </body>
</html>
    